<%= javascript_include_tag "jquery.sparkline.min", :cache => true %>

<h1 class="t2" style="margin: 15px;">Dashboard</h1>

<div>
<span class="ui-corner-all bg3" style="margin: 15px; padding: 5px;">
	<span class="bt1">Rotation</span>
	<select class="bt2" disabled>
		<option>Pediatrics</option>
	</select>
</span>
<span class="ui-corner-all bg3" style="margin: 15px; padding: 5px;">
	<a class="bt1" href="/encounters/new" style="vertical-align:middle;"><%= image_tag("add.png") %> New Encounter</a>
</span>
</div>

<div class="box1" style="margin: 15px;">
	<div class="box1" style="margin: 15px;">
	<table style="margin: 0px 30px 30px 30px;">
	<h1 class="t3" style="margin-left: 30px;">Pediatrics Encounters: History Taken <%= @hx_total %>, Physical Exam: <%= @px_total %></td></h1>
	<thead>
		<tr>
			<th class="t5 bg6">Encounters</th>
			<th class="t5 bg2" colspan="3">Histories Taken</th>
			<th class="t5 bg2"></th>
			<th class="t5 bg2" colspan="3">Physical Exams</th>
			<th class="t5 bg2">Progress</th>
		</tr>
		<tr>
			<th class="t4 bg7"></th>
			<th class="t4 bg4">Done</th>
			<th class="t4 bg4">Required</th>
			<th class="t4 bg4">Diff</th>
			<th class="t4 bg4"></th>
			<th class="t4 bg4">Done</th>
			<th class="t4 bg4">Required</th>
			<th class="t4 bg4">Diff</th>
			<th class="t4 bg4"></th>
		</tr>	
	</thead>
	<tbody>		
	    <% for status in @statuses do 
		 	cls_rest = cycle("bg5","bg4", :name => 'rest_cols')
		 	cls_col_1 = cycle("bg8","bg7", :name => 'first_col')
		%>
		<tr>
			<td class="b1 <%= cls_col_1 %>"><%= status.care_setting.name %></td>
			<td class="b1 <%= cls_rest %>"><%= status.hx_done %></td>
			<td class="b1 <%= cls_rest %>"><%= status.hx_required %></td>
			<% if status.hx_diff >= 0 %>
			<td class="b1 <%= cls_rest %> pos">(<%= status.hx_diff %>)</td>
			<% else %>
			<td class="b1 <%= cls_rest %> neg">(<%= status.hx_diff %>)</td>
			<% end %>
			<td class="b1 <%= cls_rest %>"></td>
			<td class="b1 <%= cls_rest %>"><%= status.px_done %></td>
			<td class="b1 <%= cls_rest %>"><%= status.px_required %></td>
			<% if status.px_diff >= 0 %>
			<td class="b1 <%= cls_rest %> pos">(<%= status.px_diff %>)</td>
			<% else %>
			<td class="b1 <%= cls_rest %> neg">(<%= status.px_diff %>)</td>
			<% end %>
			<td class="<%= cls_rest %>"></td>
		</tr>
		<% end %>
		<tr>
			<td class="t4 bg8">Total</td>
			<td class="t4 bg5"><%= @hx_total %></td>
			<td class="t4 bg5"><%= @hx_required_total %></td>
			<td class="t4 bg5"></td>
			<td class="t4 bg5"></td>
			<td class="t4 bg5"><%= @px_total %></td>
			<td class="t4 bg5"><%= @px_required_total %></td>
			<td class="t4 bg5"></td>
			<td class="bg5"><span class="bullet"><%= @hx_total + @px_total %>, <%= @hx_required_total + @px_required_total  %></span></td>
		</tr>
		</tbody>
	</table>
	</div>
	
	<div class="box1" style="margin: 15px;">
	<table style="margin: 0px 30px 30px 30px;">
	<h1 class="t3" style="margin-left: 30px;">Pediatrics Diagnoses: 12</h1>
	<thead>
		<tr>
			<th class="t5 bg2">Problems</th>
			<th class="t5 bg2">Count</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="b1 bg4">Diabetes</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="b1 bg5">Chest Pain</td>
			<td class="b1 bg5">6</td>
		</tr>
		<tr>
			<td class="b1 bg4">Anxiety</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="b1 bg5">Chronic Medical Problem</td>
			<td class="b1 bg5">3</td>
		</tr>
		<tr>
			<td class="b1 bg4">Growth Problem</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="t4 bg5">Total</td>
			<td class="t4 bg5">12</td>
		</tr>
		</tbody>
	</table>
	</div>
	<div class="box1" style="margin: 15px;">
	<table style="margin: 0px 30px 30px 30px;">
	<h1 class="t3" style="margin-left: 30px;">Pediatrics Procedures - 12</h1>
	<thead>
		<tr>
			<th class="t5 bg2">Procedure</th>
			<th class="t5 bg2">Count</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="b1 bg4">Lumbar Puncture</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="b1 bg5">Suturing</td>
			<td class="b1 bg5">6</td>
		</tr>
		<tr>
			<td class="b1 bg4">Warts</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="b1 bg5">Circumcision</td>
			<td class="b1 bg5">3</td>
		</tr>
		<tr>
			<td class="b1 bg4">Other</td>
			<td class="b1 bg4">1</td>
		</tr>
		<tr>
			<td class="t4 bg5">Total</td>
			<td class="t4 bg5">12</td>
		</tr>
		</tbody>
	</table>
	</div>
</div>

<script>
$(function() {
	$('.bullet').sparkline('html', {type: 'bullet', targetColor: '#1A5FAE', targetWidth: '3', performanceColor: '#999999' });
	$('.completed_bullet').sparkline('html', {type: 'bullet', targetColor: 'green', targetWidth: '3', performanceColor: '#999999' });
});
</script>
<style>
.completed_goal {
	background-color: green;	
}
</style>